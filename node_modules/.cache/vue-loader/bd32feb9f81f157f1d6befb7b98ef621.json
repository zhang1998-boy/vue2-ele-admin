{"remainingRequest":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhangpeng/Desktop/workspace/zt-fill-web/src/views/Login/index.vue?vue&type=style&index=0&id=aeba673c&lang=less&scoped=true","dependencies":[{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/src/views/Login/index.vue","mtime":1718681698327},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangpeng/Desktop/workspace/zt-fill-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZGVhbCB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgYm90dG9tOiAtOTk5OXB4Ow0KfQ0KLmxvZ2luX2NvbnRhaW5lciB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgZGlzcGxheTogZmxleDsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogIHBhZGRpbmc6IDAgMTQwcHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi8uLi9hc3NldHMvaW1nL2JhY2tncm91bmQucG5nKTsNCiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsNCn0NCg0KLmxvZ2luX2RpdiB7DQogIHdpZHRoOiA1MCU7DQogIG1heC13aWR0aDogOTYwcHg7DQogIG1pbi13aWR0aDogNTgwcHg7DQogIGhlaWdodDogNDQwcHg7DQogIG1pbi1oZWlnaHQ6IDQ0MHB4Ow0KICBiYWNrZ3JvdW5kOiAjZTNmNmZkOw0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgcGFkZGluZzogMyUgMTYwcHggMyUgNjBweDsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLnN0eWxlX2RpdiB7DQogIHdpZHRoOiAzMiU7DQogIG1heC13aWR0aDogNjE1cHg7DQogIG1pbi13aWR0aDogMzYwcHg7DQogIGhlaWdodDogODAlOw0KICBtaW4taGVpZ2h0OiA1NjBweDsNCiAgbWF4LWhlaWdodDogODYwcHg7DQogIGJhY2tncm91bmQ6ICMwODU1ZWM7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgbWFyZ2luLWxlZnQ6IC0xMDBweDsNCiAgei1pbmRleDogMTAwOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQoNCi9kZWVwLy5hbnQtaW5wdXQgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7DQogIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50Ow0KfQ0KL2RlZXAvLmhhcy1lcnJvciAuYW50LWlucHV0IHsNCiAgYm9yZGVyOiAxcHggc29saWQgI2Y1MjIyZCAhaW1wb3J0YW50Ow0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAi8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Login","sourcesContent":["<!-- eslint-disable import/no-duplicates -->\r\n<template>\r\n  <div class=\"login_container\">\r\n    <div class=\"login_div\">\r\n      <img\r\n        src=\"../../assets/img/login2.png\"\r\n        alt=\"\"\r\n        style=\"\r\n          width: 180px;\r\n          height: 180px;\r\n          position: absolute;\r\n          left: -102px;\r\n          top: -105px;\r\n        \"\r\n      />\r\n      <img\r\n        src=\"../../assets/img/spatialmodel.png\"\r\n        alt=\"\"\r\n        style=\"\r\n          width: 80px;\r\n          height: 80px;\r\n          position: absolute;\r\n          right: 16%;\r\n          top: 20px;\r\n        \"\r\n      />\r\n      <!-- 密码登陆/短信登陆 -->\r\n      <div v-if=\"procedure === 'login'\">\r\n        <a-tabs\r\n          active-Key=\"activeKey\"\r\n          :tabBarStyle=\"{ textAlign: 'center' }\"\r\n          :animated=\"false\"\r\n          @change=\"callback\"\r\n        >\r\n          <!-- 密码登陆 -->\r\n          <a-tab-pane key=\"1\" tab=\"密码登录\">\r\n            <a-form-model\r\n              ref=\"passwordform\"\r\n              :model=\"passwordform\"\r\n              style=\"margin-top: 20px\"\r\n              :rules=\"passwordRulse\"\r\n            >\r\n              <a-form-model-item prop=\"mobile\" ref=\"mobile\">\r\n                <a-input\r\n                  size=\"large\"\r\n                  v-model=\"passwordform.mobile\"\r\n                  placeholder=\"请输入手机号码\"\r\n                />\r\n              </a-form-model-item>\r\n\r\n              <a-form-model-item prop=\"password\" ref=\"password\">\r\n                <a-input-password\r\n                  size=\"large\"\r\n                  v-model=\"passwordform.password\"\r\n                  placeholder=\"请输入登录密码\"\r\n                />\r\n              </a-form-model-item>\r\n            </a-form-model>\r\n          </a-tab-pane>\r\n          <!-- 短信登陆 -->\r\n          <a-tab-pane key=\"2\" tab=\"短信登录\">\r\n            <a-form-model\r\n              ref=\"rulenoteloginForm\"\r\n              :model=\"noteloginForm\"\r\n              :rules=\"noteloginRulse\"\r\n              style=\"margin-top: 20px\"\r\n            >\r\n              <a-form-model-item prop=\"mobile\" ref=\"mobile\">\r\n                <a-input\r\n                  size=\"large\"\r\n                  v-model=\"noteloginForm.mobile\"\r\n                  placeholder=\"请输入手机号码\"\r\n                />\r\n              </a-form-model-item>\r\n              <a-form-model-item prop=\"sms_code\" ref=\"sms_code\">\r\n                <a-input\r\n                  size=\"large\"\r\n                  v-model=\"noteloginForm.sms_code\"\r\n                  placeholder=\"请输入验证码\"\r\n                >\r\n                  <a-button\r\n                    style=\"\r\n                      padding-right: 10px;\r\n                      color: #0855ec;\r\n                      border: none;\r\n                      background-color: #fff;\r\n                    \"\r\n                    :disabled=\"noteloginBtnDisable\"\r\n                    @click=\"getNoteloginCode(noteloginForm.mobile, 'login')\"\r\n                    slot=\"suffix\"\r\n                    type=\"text\"\r\n                    >{{ codeBtnWord1 }}</a-button\r\n                  >\r\n                </a-input>\r\n              </a-form-model-item>\r\n            </a-form-model>\r\n          </a-tab-pane>\r\n        </a-tabs>\r\n        <!-- 记住账户/忘记密码按钮 -->\r\n        <div style=\"display: flex; justify-content: space-between\">\r\n          <a-checkbox v-model=\"remember\" class=\"check\">记住账户</a-checkbox>\r\n          <span style=\"color: #0855ec; cursor: pointer\" @click=\"forget_password\"\r\n            >忘记密码</span\r\n          >\r\n        </div>\r\n        <!-- 登陆按钮 -->\r\n        <a-button\r\n          type=\"primary\"\r\n          html-type=\"submit\"\r\n          style=\"\r\n            width: 100%;\r\n            margin: 20px 0;\r\n            background: #0855ec;\r\n            border: 1px solid #0855ec;\r\n          \"\r\n          size=\"large\"\r\n          @click=\"onSubmit\"\r\n          >登录</a-button\r\n        >\r\n        <!-- 微信登陆/注册 -->\r\n        <div style=\"width: 100%; display: flex; justify-content: space-between\">\r\n          <div style=\"display: flex\">\r\n            <img\r\n              :src=\"require('@/assets/img/wx.png')\"\r\n              alt=\"\"\r\n              style=\"width: 22px; height: 22px; margin-right: 4px\"\r\n            />\r\n            <span\r\n              style=\"cursor: pointer; margin-top: 0px; color: #0855ec\"\r\n              @click=\"showDevelop\"\r\n              >微信登录</span\r\n            >\r\n          </div>\r\n          <span style=\"color: #0855ec; cursor: pointer\" @click=\"registerFn\"\r\n            >注册</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <!-- 忘记密码➡️重置密码 -->\r\n      <div v-if=\"procedure === 'reset_passwords'\">\r\n        <p style=\"font-size: 20px; font-weight: bold; color: #0855ec\">\r\n          重置密码\r\n        </p>\r\n        <a-form-model\r\n          ref=\"resetPasswordForm\"\r\n          :model=\"resetPasswordForm\"\r\n          :rules=\"resetPasswordFormRulse\"\r\n          style=\"margin-top: 20px\"\r\n        >\r\n          <a-form-model-item prop=\"mobile\" ref=\"mobile\">\r\n            <a-input\r\n              size=\"large\"\r\n              v-model=\"resetPasswordForm.mobile\"\r\n              placeholder=\"请输入手机号码\"\r\n            />\r\n          </a-form-model-item>\r\n          <a-form-model-item prop=\"sms_code\" ref=\"sms_code\">\r\n            <a-input\r\n              size=\"large\"\r\n              v-model=\"resetPasswordForm.sms_code\"\r\n              placeholder=\"请输入验证码\"\r\n            >\r\n              <a-button\r\n                style=\"\r\n                  padding-right: 10px;\r\n                  color: #0855ec;\r\n                  border: none;\r\n                  background-color: #fff;\r\n                \"\r\n                :disabled=\"resetPasswordBtnDisable\"\r\n                @click=\"\r\n                  getResetPasswordCode(resetPasswordForm.mobile, 'forget_pwd')\r\n                \"\r\n                slot=\"suffix\"\r\n                type=\"text\"\r\n                >{{ codeBtnWord2 }}</a-button\r\n              >\r\n            </a-input>\r\n            <!-- 解决浏览器自动填充账号密码错位问题 -->\r\n            <a-input class=\"deal\" type=\"text\"></a-input>\r\n          </a-form-model-item>\r\n          <a-form-model-item prop=\"new_password\" ref=\"new_password\">\r\n            <!-- 解决浏览器自动填充账号密码错位问题 -->\r\n            <a-input class=\"deal\" type=\"password\"></a-input>\r\n            <a-input-password\r\n              size=\"large\"\r\n              v-model=\"resetPasswordForm.new_password\"\r\n              placeholder=\"请输入新密码\"\r\n            />\r\n          </a-form-model-item>\r\n          <a-form-model-item prop=\"new_password2\" ref=\"new_password2\">\r\n            <a-input-password\r\n              size=\"large\"\r\n              v-model=\"resetPasswordForm.new_password2\"\r\n              placeholder=\"请确认新密码\"\r\n            />\r\n          </a-form-model-item>\r\n        </a-form-model>\r\n        <a-button\r\n          type=\"primary\"\r\n          html-type=\"submit\"\r\n          style=\"\r\n            width: 100%;\r\n            margin: 0 0 16px 0;\r\n            background: #0855ec;\r\n            border: 1px solid #0855ec;\r\n          \"\r\n          size=\"large\"\r\n          @click=\"resetFn\"\r\n          >重置</a-button\r\n        >\r\n        <span style=\"color: #8995a4; float: right; font-size: 14px\"\r\n          >记得密码,<span\r\n            style=\"color: #0855ec; cursor: pointer\"\r\n            @click=\"Login_now('resetPassword')\"\r\n            >马上登录</span\r\n          ></span\r\n        >\r\n      </div>\r\n\r\n      <!-- 注册账号 -->\r\n      <div v-if=\"procedure === 'register'\">\r\n        <p style=\"font-size: 20px; font-weight: bold; color: #0855ec\">\r\n          注册账号\r\n        </p>\r\n        <a-form-model\r\n          ref=\"registerForm\"\r\n          :model=\"registerForm\"\r\n          :rules=\"registerRulse\"\r\n          style=\"margin-top: 20px\"\r\n        >\r\n          <div v-if=\"registerNum === 0\">\r\n            <a-form-model-item prop=\"invitation_code\" ref=\"invitation_code\">\r\n              <a-input\r\n                size=\"large\"\r\n                v-model=\"registerForm.invitation_code\"\r\n                placeholder=\"请输入邀请码\"\r\n              />\r\n            </a-form-model-item>\r\n            <a-form-model-item prop=\"mobile\" ref=\"mobile\">\r\n              <a-input\r\n                size=\"large\"\r\n                v-model=\"registerForm.mobile\"\r\n                placeholder=\"请输入手机号码\"\r\n              />\r\n            </a-form-model-item>\r\n            <a-form-model-item prop=\"sms_code\" ref=\"sms_code\">\r\n              <a-input\r\n                size=\"large\"\r\n                v-model=\"registerForm.sms_code\"\r\n                placeholder=\"请输入验证码\"\r\n              >\r\n                <a-button\r\n                  style=\"\r\n                    padding-right: 10px;\r\n                    color: #0855ec;\r\n                    border: none;\r\n                    background-color: #fff;\r\n                  \"\r\n                  slot=\"suffix\"\r\n                  :disabled=\"registerBtnDisable\"\r\n                  @click=\"getRegisterCode(registerForm.mobile, 'register')\"\r\n                  type=\"text\"\r\n                  >{{ codeBtnWord }}</a-button\r\n                >\r\n              </a-input>\r\n            </a-form-model-item>\r\n            <a-button\r\n              type=\"primary\"\r\n              html-type=\"submit\"\r\n              style=\"\r\n                width: 100%;\r\n                margin: 20px 0;\r\n                background: #0855ec;\r\n                border: 1px solid #0855ec;\r\n              \"\r\n              size=\"large\"\r\n              @click=\"next_step\"\r\n              >下一步</a-button\r\n            >\r\n            <p\r\n              style=\"\r\n                text-align: center;\r\n                font-size: 14px;\r\n                color: #8995a4;\r\n                cursor: pointer;\r\n              \"\r\n              @click=\"Login_now('register')\"\r\n            >\r\n              返回登录页\r\n            </p>\r\n          </div>\r\n          <div v-if=\"registerNum === 1\">\r\n            <a-form-model-item prop=\"real_name\" ref=\"real_name\">\r\n              <a-input\r\n                size=\"large\"\r\n                v-model=\"registerForm.real_name\"\r\n                placeholder=\"请输入姓名\"\r\n              />\r\n            </a-form-model-item>\r\n            <a-form-model-item prop=\"email\" ref=\"email\">\r\n              <a-input\r\n                size=\"large\"\r\n                v-model=\"registerForm.email\"\r\n                placeholder=\"请输入邮箱\"\r\n              />\r\n              <!-- 解决浏览器自动填充账号密码错位问题 -->\r\n              <a-input class=\"deal\" type=\"text\"></a-input>\r\n            </a-form-model-item>\r\n            <a-form-model-item prop=\"password\" ref=\"password\">\r\n              <a-input-password\r\n                size=\"large\"\r\n                v-model=\"registerForm.password\"\r\n                placeholder=\"请输入密码\"\r\n              />\r\n            </a-form-model-item>\r\n            <a-form-model-item prop=\"password2\" ref=\"password2\">\r\n              <!-- 解决浏览器自动填充账号密码错位问题 -->\r\n              <a-input class=\"deal\" type=\"password\"></a-input>\r\n              <a-input-password\r\n                size=\"large\"\r\n                v-model=\"registerForm.password2\"\r\n                placeholder=\"请确认密码\"\r\n              />\r\n            </a-form-model-item>\r\n            <a-button\r\n              type=\"primary\"\r\n              html-type=\"submit\"\r\n              style=\"\r\n                width: 100%;\r\n                margin-bottom: 10px;\r\n                background: #0855ec;\r\n                border: 1px solid #0855ec;\r\n              \"\r\n              size=\"large\"\r\n              @click=\"CompleteRegistration\"\r\n              >完成</a-button\r\n            >\r\n            <p\r\n              style=\"\r\n                text-align: center;\r\n                font-size: 14px;\r\n                color: #8995a4;\r\n                cursor: pointer;\r\n              \"\r\n              @click=\"go_back\"\r\n            >\r\n              返回上一页\r\n            </p>\r\n          </div>\r\n        </a-form-model>\r\n      </div>\r\n    </div>\r\n    <!-- 右侧样式 -->\r\n    <div class=\"style_div\">\r\n      <img\r\n        src=\"../../assets/img/login1.png\"\r\n        alt=\"\"\r\n        style=\"\r\n          width: 220px;\r\n          height: 220px;\r\n          position: absolute;\r\n          bottom: 0;\r\n          right: 20px;\r\n        \"\r\n      />\r\n      <div\r\n        class=\"top\"\r\n        style=\"display: flex; padding: 30px; box-sizing: border-box\"\r\n      >\r\n        <img\r\n          src=\"../../assets/img/2.png\"\r\n          alt=\"\"\r\n          style=\"width: 40px; height: 40px\"\r\n        />\r\n        <p\r\n          style=\"\r\n            font-size: 32px;\r\n            color: #fff;\r\n            font-weight: bold;\r\n            margin-left: 20px;\r\n          \"\r\n        >\r\n          GatherOne\r\n        </p>\r\n      </div>\r\n      <p\r\n        style=\"font-size: 26px; color: #fff; font-weight: bold; margin: 0 30px\"\r\n      >\r\n        你好，<br />欢迎来到运营工具系统\r\n      </p>\r\n      <el-upload action=\"\" :show-file-list=\"false\" :http-request=\"handleExceed\">\r\n        <el-button type=\"primary\" class=\"rt-btn\">导入</el-button>\r\n      </el-upload>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  pwdlogin,\r\n  getPhoneCode,\r\n  verifySmsCode,\r\n  forgetPassword,\r\n  registrations,\r\n  phonePwdlogin,\r\n  achievementImport,\r\n} from '@/api/login'\r\nimport { getUserInfo } from '@/api/personal.js'\r\nexport default {\r\n  data() {\r\n    // 手机号校验\r\n    const validateNumber = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error('手机号不能为空'))\r\n      } else {\r\n        //获取工具类中的手机号正则表达式\r\n        const phoneReg =\r\n          /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\r\n        if (phoneReg.test(value)) {\r\n          callback()\r\n        } else {\r\n          //如果验证输入错误就清空\r\n          this.this.registerForm.mobile = ''\r\n          return callback(new Error('请输入正确的手机号'))\r\n        }\r\n      }\r\n    }\r\n    //校验验证码不得为空\r\n    const validateCode = (rule, value, callback) => {\r\n      if (value === '') {\r\n        callback(new Error('验证码为空'))\r\n        return false\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    // 二次输入密码校验\r\n    const validatePassword2 = (rule, value, callback) => {\r\n      if (value !== this.registerForm.password) {\r\n        callback(new Error('两次密码不一致'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    // 二次输入密码校验-重置\r\n    const validatePassword = (rule, value, callback) => {\r\n      if (value !== this.resetPasswordForm.new_password) {\r\n        callback(new Error('两次密码不一致'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    // 邮箱校验\r\n    const validateEmail = (rule, value, callback) => {\r\n      const reg = /^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$/\r\n      if (!reg.test(value)) {\r\n        callback(new Error('邮箱格式不正确'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      activeKey: '1', // tabs切换绑定值\r\n      remember: false,\r\n      procedure: 'login', // 当前页面展示的步骤绑定值\r\n      // 密码登录\r\n      passwordform: {\r\n        mobile: '',\r\n        password: '',\r\n      },\r\n      // 密码登录校验\r\n      passwordRulse: {\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: validateNumber },\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: '请输入密码',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n      },\r\n      // 验证码登录\r\n      noteloginForm: {\r\n        mobile: '',\r\n        sms_code: '',\r\n      },\r\n      // 验证码登录校验\r\n      noteloginRulse: {\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: validateNumber },\r\n        ],\r\n        sms_code: [\r\n          {\r\n            min: 6,\r\n            max: 6,\r\n            required: true,\r\n            message: '验证码不符合要求',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n      },\r\n      // 重置密码绑定值\r\n      resetPasswordForm: {\r\n        mobile: '',\r\n        sms_code: '',\r\n        new_password: '',\r\n        new_password2: '',\r\n      },\r\n      // 重置密码校验\r\n      resetPasswordFormRulse: {\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'blur' },\r\n          { validator: validateNumber },\r\n        ],\r\n        sms_code: [\r\n          {\r\n            min: 6,\r\n            max: 6,\r\n            required: true,\r\n            message: '验证码不符合要求',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        new_password: [\r\n          { required: true, message: '请输入新密码', trigger: 'change' },\r\n        ],\r\n        new_password2: [\r\n          { required: true, message: '请确认密码', trigger: 'change' },\r\n          { validator: validatePassword },\r\n        ],\r\n      },\r\n      registerNum: 0, // 注册显示步骤绑定值\r\n      // 注册账号表单绑定值\r\n      registerForm: {\r\n        invitation_code: '', //邀请码\r\n        mobile: '',\r\n        sms_code: '', //短信验证码\r\n        real_name: '', //姓名\r\n        email: '',\r\n        password: '', //密码\r\n        password2: '', //确认密码\r\n      },\r\n      // 注册账号表单校验\r\n      registerRulse: {\r\n        invitation_code: [\r\n          { required: true, message: '请输入邀请码', trigger: 'change' },\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号', trigger: 'change' },\r\n          { validator: validateNumber },\r\n        ],\r\n        sms_code: [\r\n          {\r\n            min: 6,\r\n            max: 6,\r\n            required: true,\r\n            message: '验证码不符合要求',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        name: [{ required: true, message: '请输入姓名', trigger: 'change' }],\r\n        email: [\r\n          { required: true, message: '请输入邮箱' },\r\n          { validator: validateEmail },\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'change' },\r\n        ],\r\n        password2: [\r\n          { required: true, message: '请确认密码', trigger: 'change' },\r\n          { validator: validatePassword2 },\r\n        ],\r\n      },\r\n      registerWaitTime: 61, // 获取注册验证码按钮失效时间\r\n      noteloginWaitTime: 61, // 获取手机号验证码按钮失效时间\r\n      resetPasswordWaitTime: 61, // 获取重置密码验证码按钮失效时间\r\n      registerBtnDisable: true, // 获取注册验证码按钮禁用\r\n      noteloginBtnDisable: true, // 获取手机号验证码按钮禁用\r\n      resetPasswordBtnDisable: true, // 获取重置密码验证码按钮禁用\r\n      codeBtnWord: '获取验证码', // 获取注册验证码按钮文字\r\n      codeBtnWord1: '获取验证码', // 获取手机号短信验证码按钮文字\r\n      codeBtnWord2: '获取验证码', // 获取重置密码验证码按钮文字\r\n      resetPasswordTimer: null, //重置密码-验证码倒计时\r\n      registerTimer: null, //注册-验证码倒计时\r\n      noteloginTimer: null, //短信登陆-验证码倒计时\r\n    }\r\n  },\r\n  watch: {\r\n    //短信登陆 按钮禁用\r\n    'noteloginForm.mobile': {\r\n      handler(val) {\r\n        if (this.phoneNumberStyle(val)) {\r\n          this.noteloginWaitTime === 61\r\n            ? (this.noteloginBtnDisable = false)\r\n            : (this.noteloginBtnDisable = true)\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n    //注册登陆 按钮禁用\r\n    'registerForm.mobile': {\r\n      handler(val) {\r\n        if (this.phoneNumberStyle(val)) {\r\n          this.registerWaitTime === 61\r\n            ? (this.registerBtnDisable = false)\r\n            : (this.registerBtnDisable = true)\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n    //重置密码 按钮禁用\r\n    'resetPasswordForm.mobile': {\r\n      handler(val) {\r\n        if (this.phoneNumberStyle(val)) {\r\n          this.resetPasswordWaitTime === 61\r\n            ? (this.resetPasswordBtnDisable = false)\r\n            : (this.resetPasswordBtnDisable = true)\r\n        }\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n  methods: {\r\n    async handleExceed(e) {\r\n      const restaurants = await achievementImport({\r\n        file: e.file,\r\n        type: 1,\r\n      })\r\n    },\r\n    // tabs切换事件\r\n    callback(key) {\r\n      if (key == 2) {\r\n        //短信验证码登录\r\n        setTimeout(() => {\r\n          this.$refs.rulenoteloginForm.resetFields()\r\n          this.noteloginForm.mobile = ''\r\n          this.noteloginForm.sms_code = ''\r\n        }, 1)\r\n        clearInterval(this.noteloginTimer)\r\n        this.codeBtnWord1 = '获取验证码'\r\n        this.noteloginBtnDisable = false\r\n        this.noteloginWaitTime = 61\r\n      } else {\r\n        this.$refs.passwordform?.clearValidate()\r\n      }\r\n      setTimeout(() => {\r\n        this.activeKey = key\r\n      }, 100)\r\n    },\r\n    // 登录按钮\r\n    onSubmit() {\r\n      // 账号登录\r\n      if (this.activeKey === '1') {\r\n        this.$refs.passwordform.validate(async (valid) => {\r\n          if (valid) {\r\n            let { data, code, msg } = await pwdlogin(this.passwordform)\r\n            if (code === 0) {\r\n              if (this.remember) {\r\n                // 处理记住密码的逻辑，将用户名和密码存储到localStorage中\r\n                localStorage.setItem('mobile', this.passwordform.mobile)\r\n                localStorage.setItem('password', this.passwordform.password)\r\n              } else {\r\n                localStorage.removeItem('mobile')\r\n                localStorage.removeItem('password')\r\n              }\r\n              this.$store.dispatch('getuserInfo', data)\r\n              this.$router.push('/registration/register')\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        // 短信验证码登录\r\n        this.$refs.rulenoteloginForm.validate(async (valid) => {\r\n          if (valid) {\r\n            let params = {\r\n              ...this.noteloginForm,\r\n            }\r\n            let { data, code, msg } = await phonePwdlogin(params)\r\n            if (code === 0) {\r\n              this.$store.dispatch('getuserInfo', data)\r\n              this.$router.push('/registration/register')\r\n            } else {\r\n              this.$message.error(msg)\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 获取用户详情\r\n    // async getUserDetail() {\r\n    //   let { code, msg, data } = await getUserInfo();\r\n    //   if (code !== 0) return;\r\n    //   let { real_name, avatar_url } = data;\r\n    //   localStorage.setItem(\"userDataAvatar\", avatar_url);\r\n    //   localStorage.setItem(\"userDataName\", real_name);\r\n    //   this.$store.dispatch(\"setUserInfo\", { real_name, avatar_url });\r\n    //   this.$message.success(\"登录成功\");\r\n    //   this.$router.push(\"/registration/register\");\r\n    // },\r\n    // 用于校验手机号码格式是否正确\r\n    phoneNumberStyle(val) {\r\n      let reg = /^1[3456789]\\d{9}$/\r\n      if (!reg.test(val)) {\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    // 获取注册验证码\r\n    getRegisterCode(val, type) {\r\n      let status = this.getMessageCode(\r\n        val,\r\n        type,\r\n        'registerBtnDisable',\r\n        'registerWaitTime'\r\n      )\r\n      if (!status) return\r\n      if (\r\n        this.registerForm.mobile &&\r\n        this.phoneNumberStyle(this.registerForm.mobile)\r\n      ) {\r\n        this.registerWaitTime--\r\n        this.registerBtnDisable = true\r\n        this.codeBtnWord = `${this.registerWaitTime}s 后重新获取`\r\n        this.registerTimer = setInterval(() => {\r\n          if (this.registerWaitTime > 1) {\r\n            this.registerWaitTime--\r\n            this.codeBtnWord = `${this.registerWaitTime}s 后重新获取`\r\n          } else {\r\n            clearInterval(this.registerTimer)\r\n            this.codeBtnWord = '获取验证码'\r\n            this.registerBtnDisable = false\r\n            this.registerWaitTime = 61\r\n          }\r\n        }, 1000)\r\n      } else {\r\n        this.$message.warn('请正确输入手机号')\r\n      }\r\n    },\r\n    // 获取短信登陆验证码\r\n    async getNoteloginCode(val, type) {\r\n      let status = await this.getMessageCode(\r\n        val,\r\n        type,\r\n        'noteloginBtnDisable',\r\n        'noteloginWaitTime'\r\n      )\r\n      if (!status) return\r\n      if (\r\n        this.noteloginForm.mobile &&\r\n        this.phoneNumberStyle(this.noteloginForm.mobile)\r\n      ) {\r\n        this.noteloginWaitTime--\r\n        this.noteloginBtnDisable = true\r\n        this.codeBtnWord1 = `${this.noteloginWaitTime}s 后重新获取`\r\n        this.noteloginTimer = setInterval(() => {\r\n          if (this.noteloginWaitTime > 1) {\r\n            this.noteloginWaitTime--\r\n            this.codeBtnWord1 = `${this.noteloginWaitTime}s 后重新获取`\r\n          } else {\r\n            clearInterval(this.noteloginTimer)\r\n            this.codeBtnWord1 = '获取验证码'\r\n            this.noteloginBtnDisable = false\r\n            this.noteloginWaitTime = 61\r\n          }\r\n        }, 1000)\r\n      } else {\r\n        this.$message.warn('请正确输入手机号')\r\n      }\r\n    },\r\n    // 获取重置密码验证码\r\n    getResetPasswordCode(val, type) {\r\n      let status = this.getMessageCode(\r\n        val,\r\n        type,\r\n        'resetPasswordBtnDisable',\r\n        'resetPasswordWaitTime'\r\n      )\r\n      if (!status) return\r\n      if (\r\n        this.resetPasswordForm.mobile &&\r\n        this.phoneNumberStyle(this.resetPasswordForm.mobile)\r\n      ) {\r\n        this.resetPasswordWaitTime--\r\n        this.resetPasswordBtnDisable = true\r\n        this.codeBtnWord2 = `${this.resetPasswordWaitTime}s 后重新获取`\r\n        this.resetPasswordTimer = setInterval(() => {\r\n          if (this.resetPasswordWaitTime > 1) {\r\n            this.resetPasswordWaitTime--\r\n            this.codeBtnWord2 = `${this.resetPasswordWaitTime}s 后重新获取`\r\n          } else {\r\n            clearInterval(this.resetPasswordTimer)\r\n            this.codeBtnWord2 = '获取验证码'\r\n            this.resetPasswordBtnDisable = false\r\n            this.resetPasswordWaitTime = 61\r\n          }\r\n        }, 1000)\r\n      } else {\r\n        this.$message.warn('请正确输入手机号')\r\n      }\r\n    },\r\n    //发送验证码\r\n    async getMessageCode(val, type, Disable, Time) {\r\n      let status = false\r\n      const reg =\r\n        /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\r\n      let phoneStatus = reg.test(val)\r\n      if (phoneStatus) {\r\n        let parms = {\r\n          code_type: type,\r\n          mobile: val,\r\n        }\r\n        try {\r\n          let { code, msg } = await getPhoneCode(parms)\r\n          if (code == 0) {\r\n            this.$message.success(msg)\r\n            status = true\r\n          }\r\n        } catch (error) {\r\n          this[Time] = 0\r\n          this[Disable] = false\r\n        }\r\n      } else {\r\n        this.$message.warning('请输入正确的手机号')\r\n      }\r\n      return status\r\n    },\r\n    // 忘记密码按钮\r\n    forget_password() {\r\n      this.procedure = 'reset_passwords'\r\n    },\r\n    // 记得密码马上登录按钮\r\n    Login_now(status) {\r\n      this.procedure = 'login'\r\n      this.activeKey = '1'\r\n      if (status === 'resetPassword') {\r\n        this.$refs.resetPasswordForm?.resetFields()\r\n        clearInterval(this.resetPasswordTimer)\r\n        this.codeBtnWord2 = '获取验证码'\r\n        this.resetPasswordBtnDisable = false\r\n        this.resetPasswordWaitTime = 61\r\n      } else {\r\n        this.$refs.registerForm?.resetFields()\r\n        clearInterval(this.registerTimer)\r\n        this.codeBtnWord = '获取验证码'\r\n        this.registerBtnDisable = false\r\n        this.registerWaitTime = 61\r\n      }\r\n    },\r\n    // 重置按钮\r\n    resetFn() {\r\n      this.$refs.resetPasswordForm.validate(async (valid) => {\r\n        if (valid) {\r\n          let { code, msg } = await this.checkVerifySmsCode(\r\n            this.resetPasswordForm.mobile,\r\n            this.resetPasswordForm.sms_code,\r\n            'forget_pwd'\r\n          )\r\n          if (code == 0) {\r\n            this.resetPwd()\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //重置密码\r\n    async resetPwd() {\r\n      let data = {\r\n        ...this.resetPasswordForm,\r\n      }\r\n      let { code, msg } = await forgetPassword(data)\r\n      if (code == 0) {\r\n        this.$message.success(msg)\r\n        setTimeout(() => {\r\n          this.procedure = 'login'\r\n          this.activeKey = '1'\r\n          this.$refs.resetPasswordForm.resetFields()\r\n          // this.resetPasswordWaitTime = 0;\r\n        }, 1000)\r\n      }\r\n    },\r\n    //校验忘记密码-验证码\r\n    async checkVerifySmsCode(mobile, sms_code, code_type) {\r\n      let data1 = {\r\n        mobile,\r\n        sms_code,\r\n        code_type,\r\n      }\r\n      let { code, msg } = await verifySmsCode(data1)\r\n      return { code, msg }\r\n    },\r\n    // 注册按钮\r\n    registerFn() {\r\n      this.procedure = 'register'\r\n    },\r\n    // 注册账号下一步\r\n    async next_step() {\r\n      this.$refs.registerForm.validate(async (valid) => {\r\n        if (valid) {\r\n          if (\r\n            this.registerForm.invitation_code &&\r\n            this.registerForm.mobile &&\r\n            this.registerForm.sms_code\r\n          ) {\r\n            let { code, msg } = await this.checkVerifySmsCode(\r\n              this.registerForm.mobile,\r\n              this.registerForm.sms_code,\r\n              'register'\r\n            )\r\n            if (code == 0) {\r\n              this.registerNum = 1\r\n              this.$message.success(msg)\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 注册返回上一步\r\n    go_back() {\r\n      this.registerNum = 0\r\n    },\r\n    //完成注册\r\n    async CompleteRegistration() {\r\n      let params = { ...this.registerForm }\r\n      let { code, msg } = await registrations(params)\r\n      if (code == 0) {\r\n        this.$message.success(msg)\r\n        setTimeout(() => {\r\n          this.procedure = 'login'\r\n          this.activeKey = '1'\r\n        }, 2000)\r\n      }\r\n    },\r\n    //微信登录正在开发中\r\n    showDevelop() {\r\n      this.$notification.open({\r\n        type: 'warning',\r\n        message: '提示',\r\n        description: '此功能正在开发中',\r\n      })\r\n    },\r\n    getfile() {\r\n      console.log(111)\r\n    },\r\n  },\r\n  created() {\r\n    this.getfile()\r\n    // 在页面加载时检查localStorage中是否有记住的用户名和密码\r\n    if (localStorage.getItem('mobile') && localStorage.getItem('password')) {\r\n      this.passwordform.mobile = localStorage.getItem('mobile')\r\n      this.passwordform.password = localStorage.getItem('password')\r\n      this.remember = true\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.deal {\r\n  position: fixed;\r\n  bottom: -9999px;\r\n}\r\n.login_container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: fixed;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0 140px;\r\n  box-sizing: border-box;\r\n  background-image: url(../../assets/img/background.png);\r\n  background-size: cover;\r\n}\r\n\r\n.login_div {\r\n  width: 50%;\r\n  max-width: 960px;\r\n  min-width: 580px;\r\n  height: 440px;\r\n  min-height: 440px;\r\n  background: #e3f6fd;\r\n  border-radius: 6px;\r\n  position: relative;\r\n  padding: 3% 160px 3% 60px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.style_div {\r\n  width: 32%;\r\n  max-width: 615px;\r\n  min-width: 360px;\r\n  height: 80%;\r\n  min-height: 560px;\r\n  max-height: 860px;\r\n  background: #0855ec;\r\n  border-radius: 6px;\r\n  margin-left: -100px;\r\n  z-index: 100;\r\n  position: relative;\r\n}\r\n\r\n/deep/.ant-input {\r\n  background-color: #fff !important;\r\n  border: none !important;\r\n}\r\n/deep/.has-error .ant-input {\r\n  border: 1px solid #f5222d !important;\r\n}\r\n</style>\r\n"]}]}